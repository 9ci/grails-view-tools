apply plugin: 'codenarc'
//apply plugin: "jacoco"
apply plugin: 'com.bmuschko.clover'

dependencies {
    compile "org.grails.plugins:hibernate5"
    compile "org.hibernate:hibernate-core:5.1.1.Final"
    compile "org.hibernate:hibernate-ehcache:5.1.1.Final"
    provided "org.codehaus.groovy:groovy-ant"
    compile "commons-io:commons-io:2.5"

    compile "org.springframework:spring-test"

    codenarc 'org.codenarc:CodeNarc:0.25.2'
    clover 'org.openclover:clover:4.2.0'
    testCompile 'org.openclover:clover:4.2.0'

}

bootRepackage.enabled = false

bootRun {
    jvmArgs('-Dspring.output.ansi.enabled=always')
    addResources = true
}

codenarc {
    toolVersion = '0.25.2'
    configFile = file("${projectDir}/grails-app/conf/codenarc/rules.groovy")
    //maxPriority1Violations = 0
    maxPriority2Violations = 2
    maxPriority3Violations = 8
}

// codenarcMain {
//     ignoreFailures = false
//     maxPriority1Violations = 0
//     maxPriority2Violations = 2
//     maxPriority3Violations = 8
// }

// codenarcTest{
//     ignoreFailures = true
//     maxPriority1Violations = 0
//     maxPriority2Violations = 2
//     maxPriority3Violations = 8
// }


groovydoc {
    //docTitle = "Foo Bar $version"
    //header = docTitle
    //windowTitle = docTitle
    //use = true
    // Links to external Javadoc, currently only the J2SE links are working properly
    excludes = ['**/*GrailsPlugin.groovy','**/Application.groovy' ]
    link('http://download.oracle.com/javase/8/docs/api/', 'java.', 'org.xml', 'javax.', 'org.xml.')
    link("https://docs.spring.io/spring/docs/4.2.x/javadoc-api/", 'org.springframework')
    link('http://groovy.codehaus.org/api/',  'groovy.', 'org.codehaus.groovy.')
    link('https://docs.grails.org/3.2.x/api',  'grails.', 'org.grails.')
    link('http://gorm.grails.org/latest/hibernate/api/',  'grails.gorm', 'org.grails.datastore', 'org.grails.orm')
}


clover {
    report {
        html = true
    }
}


