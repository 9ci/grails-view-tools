{
    "docs": [
        {
            "location": "/",
            "text": "____   ____.__                                           _.-````'-,_\n\\   \\ /   /|__|  ____  __  _  __                     ,-'`           `'-.,_\n \\   Y   / |  |_/ __ \\ \\ \\/ \\/ /             /)     (\\       9ci's       '``-.\n  \\     /  |  |\\  ___/  \\     /             ( ( .,-') )    Yak Works         ```\n   \\___/   |__| \\___  >  \\/\\_/               \\ '   (_/                         !!\n                    \\/                        |       /)           '           !!!\n  ___________           .__                   ^\\    ~'            '     !    !!!!\n  \\__    ___/___   ____ |  |   ______           !      _/! , !   !  ! !  !   !!!\n    |    | /  _ \\ /  _ \\|  |  /  ___/            \\Y,   |!!!  !  ! !!  !! !!!!!!!\n    |    |(  \n<\n_> |  \n<\n_> )  |__\\___ \\               `!!! !!!! !!  )!!!!!!!!!!!!!\n    |____| \\____/ \\____/|____/____  >               !!  ! ! \\( \\(  !!!|/!  |/!\n                                  \\/               /_(      /_(/_(    /_(  /_(   \n         Version: 1.2.0\n\n\n\n\n\nRELEASE NOTES\n\n\n\n\n\n\n\n\nGuide\n\n\nAPI\n\n\n\n\n\n\n\n\n\n\nReleased Docs\n\n\nReleased Api\n\n\n\n\n\n\nsnapshot\n\n\nsnapshot\n\n\n\n\n\n\n\n\ncompile \"org.grails.plugins:view-tools:1.2.0\"\n\n\n\n\nDescription\n\u00b6\n\n\nAPI Documentation can be found here \nhttps://yakworks.github.io/view-tools/api\n\n\nutility helpers to locate views in the spring mvc context\n- \nViewResourceLocator\n for locating views in grails-app/views, plugins, and custom external paths.\n- \nGrailsWebEnvironment\n for binding a mock request if one doesn't exist so that services can operate without a controller.\n\n\nUsed to locate View resources whether in development or WAR deployed mode from static\nresources, custom resource loaders and binary plugins.\nLoads from a local grails-app folder for dev and from WEB-INF in\ndevelopment mode.\n\n\nInstall\n\u00b6\n\n\nGrails 3\n\n\ncompile org.grails.plugins:view-tools:1.2.0\n\n\n\nGrails 2\n\n\ncompile :view-tools:1.2.0\n\n\n\nViewResourceLocator\n\u00b6\n\n\nExample Bean\n\n\nviewResourceLocator\n(\ngrails\n.\nplugin\n.\nviewtools\n.\nViewResourceLocator\n)\n \n{\n \nbean\n \n->\n\n    \n//initial searchLocations\n\n    \nsearchLocations\n \n=\n \n[\n\n        \n\"classpath:templates/\"\n,\n \n// consistent with spring-boot defaults\n\n        \n\"file:/someLoc/my-templates/\"\n\n    \n]\n \n\n    \nsearchBinaryPlugins\n \n=\n \nfalse\n \n//whether to look in binary plugins, does not work in grails2\n\n\n    \n// in dev mode there will be a groovyPageResourceLoader \n\n    \n// with base dir set to the running project\n\n    \n//if(Environment.isDevelopmentEnvironmentAvailable()) <- better for Grails 3\n\n    \nif\n(!\napplication\n.\nwarDeployed\n){\n \n// <- grails2\n\n        \nresourceLoader\n \n=\n \nref\n(\n'groovyPageResourceLoader'\n)\n \n//adds to list, does not replace\n\n    \n}\n\n\n\n}\n\n\n\n\n\n\nResource locate(String uri)\n : is the primary method and is used to find a view resource for a path. For example /foo/bar.xyz will search for /WEB-INF/grails-app/views/foo/bar.xyz in production and grails-app/views/foo/bar.xyz at development time. It also uses the the controller if called from a plugin to figure out where its located and finally does a brute force locate. Most of the logic is based on and uses what Grail's DefaultGroovyPageLocator does.\n\n\nResource getResource(String uri)\n : also implements Springs \nResourceLoader\n interface. This method works like a normal ResoruceLoader and \nuri\n can start with the standard \nfile:, classpath:, etc\n\n\n\n\nGrailsWebEnvironment\n\u00b6\n\n\nGrailsWebEnvironment.bindRequestIfNull() methods are the ones of interest.\nbased on the RenderEnvironment in grails-rendering and private class in grails-mail\nAll this does is bind a mock request and mock response if one doesn't exist\ndeals with setting the WrappedResponseHolder.wrappedResponse as well\nYou will need the spring test lib on your main compile.\n\n\ncompile \"org.springframework:spring-test\"\n\n\nExample App\n\u00b6\n\n\nsee \nhttps://github.com/yakworks/view-tools/tree/master/test-projects/app\n\nIt contains a number of examples as well as a simple spring based viewResolver that uses ViewResourceLocator to find the template files it needs.",
            "title": "Overview"
        },
        {
            "location": "/#description",
            "text": "API Documentation can be found here  https://yakworks.github.io/view-tools/api  utility helpers to locate views in the spring mvc context\n-  ViewResourceLocator  for locating views in grails-app/views, plugins, and custom external paths.\n-  GrailsWebEnvironment  for binding a mock request if one doesn't exist so that services can operate without a controller.  Used to locate View resources whether in development or WAR deployed mode from static\nresources, custom resource loaders and binary plugins.\nLoads from a local grails-app folder for dev and from WEB-INF in\ndevelopment mode.",
            "title": "Description"
        },
        {
            "location": "/#install",
            "text": "Grails 3  compile org.grails.plugins:view-tools:1.2.0  Grails 2  compile :view-tools:1.2.0",
            "title": "Install"
        },
        {
            "location": "/#viewresourcelocator",
            "text": "Example Bean  viewResourceLocator ( grails . plugin . viewtools . ViewResourceLocator )   {   bean   -> \n     //initial searchLocations \n     searchLocations   =   [ \n         \"classpath:templates/\" ,   // consistent with spring-boot defaults \n         \"file:/someLoc/my-templates/\" \n     ]  \n\n     searchBinaryPlugins   =   false   //whether to look in binary plugins, does not work in grails2 \n\n     // in dev mode there will be a groovyPageResourceLoader  \n     // with base dir set to the running project \n     //if(Environment.isDevelopmentEnvironmentAvailable()) <- better for Grails 3 \n     if (! application . warDeployed ){   // <- grails2 \n         resourceLoader   =   ref ( 'groovyPageResourceLoader' )   //adds to list, does not replace \n     }  }    Resource locate(String uri)  : is the primary method and is used to find a view resource for a path. For example /foo/bar.xyz will search for /WEB-INF/grails-app/views/foo/bar.xyz in production and grails-app/views/foo/bar.xyz at development time. It also uses the the controller if called from a plugin to figure out where its located and finally does a brute force locate. Most of the logic is based on and uses what Grail's DefaultGroovyPageLocator does.  Resource getResource(String uri)  : also implements Springs  ResourceLoader  interface. This method works like a normal ResoruceLoader and  uri  can start with the standard  file:, classpath:, etc",
            "title": "ViewResourceLocator"
        },
        {
            "location": "/#grailswebenvironment",
            "text": "GrailsWebEnvironment.bindRequestIfNull() methods are the ones of interest.\nbased on the RenderEnvironment in grails-rendering and private class in grails-mail\nAll this does is bind a mock request and mock response if one doesn't exist\ndeals with setting the WrappedResponseHolder.wrappedResponse as well\nYou will need the spring test lib on your main compile.  compile \"org.springframework:spring-test\"",
            "title": "GrailsWebEnvironment"
        },
        {
            "location": "/#example-app",
            "text": "see  https://github.com/yakworks/view-tools/tree/master/test-projects/app \nIt contains a number of examples as well as a simple spring based viewResolver that uses ViewResourceLocator to find the template files it needs.",
            "title": "Example App"
        },
        {
            "location": "/release-notes/",
            "text": "Release notes were automatically generated by \nShipkit\n\n\n1.2.0\n\u00b6\n\n\n\n\n2019-05-08 - 168 commits by 6 authors - published to \n\n\nCommits: \nsudhir nimavat\n (90), \nJoshua\n (41), Joshua Burnett (32), jdabal (2), \nNikita Pavlov\n (2), \nKen Roberts\n (1)\n\n\nShipyak upgrade cleanup \n(#29)\n\n\nGrails339 \n(#27)\n\n\nrepo update \n(#26)\n\n\nMisc cleanup \n(#25)\n\n\nconfigurable app.resource key \n(#21)\n\n\ntasks to bring this 100%  \n(#17)\n\n\nmake it possible to pass on geb.env to run tests on different browsers \n(#15)\n\n\n\n\n10 build cleanup \n(#13)\n\u00b6\n\n\n\n\nCreate ConfigKeyAppResourceLoader \n(#11)\n\n\ntravis cleanup \n(#10)\n\n\nFix createAttachmentFile : Remove ability to explicitely pass attachmentLocationKey \n(#9)\n\n\nfix or figure our problem with geb functional tests being run from rootDir \n(#7)\n\n\nAdd CodeNarc config. \n(#3)\n\n\nExclude geb tests folder from integration tests \n(#1)",
            "title": "Release Notes"
        },
        {
            "location": "/release-notes/#120",
            "text": "2019-05-08 - 168 commits by 6 authors - published to   Commits:  sudhir nimavat  (90),  Joshua  (41), Joshua Burnett (32), jdabal (2),  Nikita Pavlov  (2),  Ken Roberts  (1)  Shipyak upgrade cleanup  (#29)  Grails339  (#27)  repo update  (#26)  Misc cleanup  (#25)  configurable app.resource key  (#21)  tasks to bring this 100%   (#17)  make it possible to pass on geb.env to run tests on different browsers  (#15)",
            "title": "1.2.0"
        },
        {
            "location": "/release-notes/#10-build-cleanup-13",
            "text": "Create ConfigKeyAppResourceLoader  (#11)  travis cleanup  (#10)  Fix createAttachmentFile : Remove ability to explicitely pass attachmentLocationKey  (#9)  fix or figure our problem with geb functional tests being run from rootDir  (#7)  Add CodeNarc config.  (#3)  Exclude geb tests folder from integration tests  (#1)",
            "title": "10 build cleanup (#13)"
        },
        {
            "location": "/app-resources/",
            "text": "AppResourceLoader provides a consistent and convention based way to lookup File system resources.\n\n\nConfiguration\n\u00b6\n\n\nBasic configuration**\n\u00b6\n\n\napp\n \n{\n\n    \nresources\n \n{\n\n\n        \ncurrentTenant\n \n=\n \n{\n \nreturn\n \n[\nid:\n1\n,\n \nnum:\n\"tenant-name\"\n]}\n\n\n        \nattachments\n.\nlocation\n \n=\n \n'attachments'\n\n\n        \nrootLocation\n \n=\n \n{\n \nargs\n \n->\n\n            \nFile\n \nfile\n \n=\n \nnew\n \nFile\n(\n\"/projectname/rootLocation\"\n)\n\n            \nif\n(!\nfile\n.\nexists\n())\n \n{\n\n                \nfile\n.\nmkdirs\n()\n\n            \n}\n\n            \nreturn\n \nfile\n.\ncanonicalPath\n\n        \n}\n\n    \n}\n\n\n}\n\n\n\n\n\nDefine resources config root.\n\u00b6\n\n\nBy default, the resources configuration is expected to be under app.resources. However it can be changed by overriding the appResourceLoader bean definition.\n\n\n    \nappResourceLoader\n(\nAppResourceLoader\n)\n \n{\nbean\n \n->\n\n        \nresourcesConfigRootKey\n \n=\n \n\"nine.resources\"\n\n        \nbean\n.\nautowire\n \n=\n \ntrue\n\n    \n}\n\n\n\n\n\nDefining root location\n\u00b6\n\n\nAppResources needs root location directory to be defined and should exist.\n\n\nThe Root Location can be defined as a closure that returns path to the directory as shown below.\n\n\nrootLocation\n \n=\n \n{\n \nargs\n \n->\n\n    \nreturn\n \n\"/projectname/rootLocation\"\n\n\n}\n\n\n\n\n\nThe closure is passed a map as argument containing keys \ntenantId\n and \ntenantSubDomain\n.\n\n\nDefining currentTenant\n\u00b6\n\n\n    \ncurrentTenant\n \n=\n \n{\n \nreturn\n \n[\nid:\n1\n,\n \nnum:\n\"tenant-name\"\n]}\n    \n\n\n\n\nThis is also a closure and can return dynamic value based on some criteria.\nThe closure can return a map or any object which has \nid\n and \nnum\n properties.\nThis values are passed as tenantId and tenantSubDomain when retrieving the value of root location.\n\n\nAttachments\n\u00b6\n\n\nApp resources provides utilities for storing and retrieving attachments.\n\n\nDeclare attachments.location as a subdirectory under root location\n\n\n    \nattachments\n.\nlocation\n \n=\n \n'attachments'\n\n\n\n\n\nCreate an attachment\n\n\n    \nappResourceLoader\n.\ncreateAttachmentFile\n(\nLong\n \nattachmentId\n,\n \nString\n \nname\n,\n \nString\n \nextension\n,\n \ndata\n)\n\n\n\n\nThe data can be either a file a String, or a byte array\n\n\nAccessing a directory under root location\n\n\n    \nFile\n \ndirectory\n \n=\n \nappResourceLoader\n.\ngetLocation\n(\nkey\n)\n\n\n\nHere key is the config key, eg (attachments.location or views.location)\n\n\nTemporary Files\n\u00b6\n\n\nApp resource service provides helper method to create temporary files.\n\n \nappResourceLoader\n.\ncreateTempFile\n()\n \n\n\nBy default the temporary files are stored in system temp directory.\nHowever location of tempDir can be changed in configuration as shown below.\n\n\napp\n.\nresources\n.\ntempDir\n \n=\n \n\"/path/to/dir\"\n\n\n\n\n\nNote:\n OS takes care of cleaning system temp directory, however if you explicitly specify the location of tempDir then you will need to take care of cleaning up the temp files regularly.\n\n\nConfigKeyAppResourceLoader\n\n\nConfigKeyAppResourceLoader provides ability to load resources from a directory configured as app resource location.\n\n\nDefine ConfigKeyAppResourceLoader as a bean in grails-app/conf/spring/resources.groovy\n\n\n    \nviewResourceLocator\n(\ngrails\n.\nplugin\n.\nviewtools\n.\nViewResourceLocator\n)\n \n{\n \nbean\n \n->\n\n        \nsearchPaths\n \n=\n \n[]\n\n        \nsearchLoaders\n \n=\n \n[\nref\n(\n\"configKeyAppResourceLoader\"\n)]\n\n\n        \nsearchBinaryPlugins\n \n=\n \ntrue\n \n//whether to look in binary plugins, does not work in grails2\n\n        \nscanAllPluginsWhenNotFound\n \n=\n \nfalse\n\n\n    \n}\n\n\n    \nconfigKeyAppResourceLoader\n(\nConfigKeyAppResourceLoader\n)\n \n{\n\n        \nbaseAppResourceKey\n \n=\n \n\"views.location\"\n\n        \nappResourceLoader\n \n=\n \nref\n(\n\"appResourceLoader\"\n)\n\n    \n}\n\n\n\n\n\nDefine views.location app resource directory\n\n\napp\n \n{\n\n    \nresources\n \n{\n\n        \nviews\n.\nlocation\n \n=\n \n\"views\"\n\n    \n}\n\n\n}\n\n\n\n\n\nNow the views can be stored under root-location/views directory, and it will be picked up.",
            "title": "App Resources"
        },
        {
            "location": "/app-resources/#configuration",
            "text": "",
            "title": "Configuration"
        },
        {
            "location": "/app-resources/#basic-configuration",
            "text": "app   { \n     resources   { \n\n         currentTenant   =   {   return   [ id: 1 ,   num: \"tenant-name\" ]} \n\n         attachments . location   =   'attachments' \n\n         rootLocation   =   {   args   -> \n             File   file   =   new   File ( \"/projectname/rootLocation\" ) \n             if (! file . exists ())   { \n                 file . mkdirs () \n             } \n             return   file . canonicalPath \n         } \n     }  }",
            "title": "Basic configuration**"
        },
        {
            "location": "/app-resources/#define-resources-config-root",
            "text": "By default, the resources configuration is expected to be under app.resources. However it can be changed by overriding the appResourceLoader bean definition.       appResourceLoader ( AppResourceLoader )   { bean   -> \n         resourcesConfigRootKey   =   \"nine.resources\" \n         bean . autowire   =   true \n     }",
            "title": "Define resources config root."
        },
        {
            "location": "/app-resources/#defining-root-location",
            "text": "AppResources needs root location directory to be defined and should exist.  The Root Location can be defined as a closure that returns path to the directory as shown below.  rootLocation   =   {   args   -> \n     return   \"/projectname/rootLocation\"  }   The closure is passed a map as argument containing keys  tenantId  and  tenantSubDomain .",
            "title": "Defining root location"
        },
        {
            "location": "/app-resources/#defining-currenttenant",
            "text": "currentTenant   =   {   return   [ id: 1 ,   num: \"tenant-name\" ]}       This is also a closure and can return dynamic value based on some criteria.\nThe closure can return a map or any object which has  id  and  num  properties.\nThis values are passed as tenantId and tenantSubDomain when retrieving the value of root location.",
            "title": "Defining currentTenant"
        },
        {
            "location": "/app-resources/#attachments",
            "text": "App resources provides utilities for storing and retrieving attachments.  Declare attachments.location as a subdirectory under root location       attachments . location   =   'attachments'   Create an attachment       appResourceLoader . createAttachmentFile ( Long   attachmentId ,   String   name ,   String   extension ,   data )   The data can be either a file a String, or a byte array  Accessing a directory under root location       File   directory   =   appResourceLoader . getLocation ( key )  \nHere key is the config key, eg (attachments.location or views.location)",
            "title": "Attachments"
        },
        {
            "location": "/app-resources/#temporary-files",
            "text": "App resource service provides helper method to create temporary files.   appResourceLoader . createTempFile ()   \nBy default the temporary files are stored in system temp directory.\nHowever location of tempDir can be changed in configuration as shown below.  app . resources . tempDir   =   \"/path/to/dir\"   Note:  OS takes care of cleaning system temp directory, however if you explicitly specify the location of tempDir then you will need to take care of cleaning up the temp files regularly.  ConfigKeyAppResourceLoader  ConfigKeyAppResourceLoader provides ability to load resources from a directory configured as app resource location.  Define ConfigKeyAppResourceLoader as a bean in grails-app/conf/spring/resources.groovy       viewResourceLocator ( grails . plugin . viewtools . ViewResourceLocator )   {   bean   -> \n         searchPaths   =   [] \n         searchLoaders   =   [ ref ( \"configKeyAppResourceLoader\" )] \n\n         searchBinaryPlugins   =   true   //whether to look in binary plugins, does not work in grails2 \n         scanAllPluginsWhenNotFound   =   false \n\n     } \n\n     configKeyAppResourceLoader ( ConfigKeyAppResourceLoader )   { \n         baseAppResourceKey   =   \"views.location\" \n         appResourceLoader   =   ref ( \"appResourceLoader\" ) \n     }   Define views.location app resource directory  app   { \n     resources   { \n         views . location   =   \"views\" \n     }  }   Now the views can be stored under root-location/views directory, and it will be picked up.",
            "title": "Temporary Files"
        }
    ]
}